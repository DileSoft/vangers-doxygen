<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vangers: lib/xtool/iniparser/dictionary.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vangers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dictionary_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dictionary.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements a dictionary for string variables.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="">dictionary.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a071228a4e1c69ac2eec59e9c1385185a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#a071228a4e1c69ac2eec59e9c1385185a">MAXVALSZ</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a071228a4e1c69ac2eec59e9c1385185a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4ab97b3163920286cb932a3faedf86"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#aaf4ab97b3163920286cb932a3faedf86">DICTMINSZ</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:aaf4ab97b3163920286cb932a3faedf86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a220dbd9af990c8faebfd01bd62b2dde4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#a220dbd9af990c8faebfd01bd62b2dde4">DICT_INVALID_KEY</a>&#160;&#160;&#160;((char*)-1)</td></tr>
<tr class="separator:a220dbd9af990c8faebfd01bd62b2dde4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9ad99578040354d12ba4cc518c1c18d8"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#a9ad99578040354d12ba4cc518c1c18d8">dictionary_hash</a> (char *<a class="el" href="ikeys_8h.html#a03636f55a9f79ad2152c41be5811a33d">key</a>)</td></tr>
<tr class="memdesc:a9ad99578040354d12ba4cc518c1c18d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the hash key for a string.  <a href="dictionary_8c.html#a9ad99578040354d12ba4cc518c1c18d8">More...</a><br /></td></tr>
<tr class="separator:a9ad99578040354d12ba4cc518c1c18d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f584d70e3559fe6fe5f62a112bc7b17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#a9f584d70e3559fe6fe5f62a112bc7b17">dictionary_new</a> (int size)</td></tr>
<tr class="memdesc:a9f584d70e3559fe6fe5f62a112bc7b17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new dictionary object.  <a href="dictionary_8c.html#a9f584d70e3559fe6fe5f62a112bc7b17">More...</a><br /></td></tr>
<tr class="separator:a9f584d70e3559fe6fe5f62a112bc7b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b19a39bef9cf05b19adb01ced4fae5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#a11b19a39bef9cf05b19adb01ced4fae5">dictionary_del</a> (<a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *d)</td></tr>
<tr class="memdesc:a11b19a39bef9cf05b19adb01ced4fae5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a dictionary object.  <a href="dictionary_8c.html#a11b19a39bef9cf05b19adb01ced4fae5">More...</a><br /></td></tr>
<tr class="separator:a11b19a39bef9cf05b19adb01ced4fae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d0e02363aa4220eef57a72949e1693"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#ac9d0e02363aa4220eef57a72949e1693">dictionary_get</a> (<a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *d, char *<a class="el" href="ikeys_8h.html#a03636f55a9f79ad2152c41be5811a33d">key</a>, char *def)</td></tr>
<tr class="memdesc:ac9d0e02363aa4220eef57a72949e1693"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a value from a dictionary.  <a href="dictionary_8c.html#ac9d0e02363aa4220eef57a72949e1693">More...</a><br /></td></tr>
<tr class="separator:ac9d0e02363aa4220eef57a72949e1693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4d7cdd694617bc1791b194b7ce37717"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#af4d7cdd694617bc1791b194b7ce37717">dictionary_set</a> (<a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *d, char *<a class="el" href="ikeys_8h.html#a03636f55a9f79ad2152c41be5811a33d">key</a>, char *val)</td></tr>
<tr class="memdesc:af4d7cdd694617bc1791b194b7ce37717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a value in a dictionary.  <a href="dictionary_8c.html#af4d7cdd694617bc1791b194b7ce37717">More...</a><br /></td></tr>
<tr class="separator:af4d7cdd694617bc1791b194b7ce37717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108b89bce8d154d4a9f489cbc89f8b9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#a108b89bce8d154d4a9f489cbc89f8b9e">dictionary_unset</a> (<a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *d, char *<a class="el" href="ikeys_8h.html#a03636f55a9f79ad2152c41be5811a33d">key</a>)</td></tr>
<tr class="memdesc:a108b89bce8d154d4a9f489cbc89f8b9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a key in a dictionary.  <a href="dictionary_8c.html#a108b89bce8d154d4a9f489cbc89f8b9e">More...</a><br /></td></tr>
<tr class="separator:a108b89bce8d154d4a9f489cbc89f8b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e29ecf9c79331b1c6c26cd662cba042"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dictionary_8c.html#a6e29ecf9c79331b1c6c26cd662cba042">dictionary_dump</a> (<a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *d, FILE *out)</td></tr>
<tr class="memdesc:a6e29ecf9c79331b1c6c26cd662cba042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump a dictionary to an opened file pointer.  <a href="dictionary_8c.html#a6e29ecf9c79331b1c6c26cd662cba042">More...</a><br /></td></tr>
<tr class="separator:a6e29ecf9c79331b1c6c26cd662cba042"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements a dictionary for string variables. </p>
<dl class="section author"><dt>Author</dt><dd>N. Devillard </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Sep 2007 </dd></dl>
<dl class="section version"><dt>Version</dt><dd></dd></dl>
<dl class="section rcs"><dt>Revision</dt><dd>1.27 </dd></dl>
<p>This module implements a simple dictionary object, i.e. a list of string/string associations. This object is useful to store e.g. informations retrieved from a configuration file (ini files). </p>

<p class="definition">Definition in file <a class="el" href="">dictionary.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a220dbd9af990c8faebfd01bd62b2dde4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a220dbd9af990c8faebfd01bd62b2dde4">&#9670;&nbsp;</a></span>DICT_INVALID_KEY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DICT_INVALID_KEY&#160;&#160;&#160;((char*)-1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invalid key token </p>

</div>
</div>
<a id="aaf4ab97b3163920286cb932a3faedf86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf4ab97b3163920286cb932a3faedf86">&#9670;&nbsp;</a></span>DICTMINSZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DICTMINSZ&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimal allocated number of entries in a dictionary </p>

</div>
</div>
<a id="a071228a4e1c69ac2eec59e9c1385185a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a071228a4e1c69ac2eec59e9c1385185a">&#9670;&nbsp;</a></span>MAXVALSZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXVALSZ&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum value size for integers and doubles. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a11b19a39bef9cf05b19adb01ced4fae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11b19a39bef9cf05b19adb01ced4fae5">&#9670;&nbsp;</a></span>dictionary_del()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dictionary_del </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a dictionary object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>dictionary object to deallocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>Deallocate a dictionary object and all memory associated to it. </p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span>     i ;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (d==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) return ;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">for</span> (i=0 ; i&lt;d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> ; i++) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]!=<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            free(d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i]!=<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            free(d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i]);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    free(d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    free(d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    free(d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    free(d);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    return ;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00055">_dictionary_::hash</a>, <a class="el" href="#l00054">_dictionary_::key</a>, <a class="el" href="#l00005">NULL</a>, <a class="el" href="#l00052">_dictionary_::size</a>, and <a class="el" href="#l00053">_dictionary_::val</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00649">iniparser_freedict()</a>, and <a class="el" href="#l00529">iniparser_load()</a>.</p>

</div>
</div>
<a id="a6e29ecf9c79331b1c6c26cd662cba042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e29ecf9c79331b1c6c26cd662cba042">&#9670;&nbsp;</a></span>dictionary_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dictionary_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump a dictionary to an opened file pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>Dictionary to dump </td></tr>
    <tr><td class="paramname">f</td><td>Opened file pointer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>Dumps a dictionary onto an opened file pointer. Key pairs are printed out as <code></code>[Key]=[Value], one per line. It is Ok to provide stdout or stderr as output file pointers. </p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">int</span>     i ;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (d==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || out==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) return ;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#ac93e659a505b71aa87b8b558b55ee872">n</a>&lt;1) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        fprintf(out, <span class="stringliteral">&quot;empty dictionary\n&quot;</span>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        return ;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">for</span> (i=0 ; i&lt;d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> ; i++) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            fprintf(out, <span class="stringliteral">&quot;%20s\t[%s]\n&quot;</span>,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i],</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i] ? d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i] : <span class="stringliteral">&quot;UNDEF&quot;</span>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    return ;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00054">_dictionary_::key</a>, <a class="el" href="#l00051">_dictionary_::n</a>, <a class="el" href="#l00005">NULL</a>, <a class="el" href="#l00052">_dictionary_::size</a>, and <a class="el" href="#l00053">_dictionary_::val</a>.</p>

</div>
</div>
<a id="ac9d0e02363aa4220eef57a72949e1693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d0e02363aa4220eef57a72949e1693">&#9670;&nbsp;</a></span>dictionary_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dictionary_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a value from a dictionary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>dictionary object to search. </td></tr>
    <tr><td class="paramname">key</td><td>Key to look for in the dictionary. </td></tr>
    <tr><td class="paramname">def</td><td>Default value to return if key not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 pointer to internally allocated character string.</dd></dl>
<p>This function locates a key in a dictionary and returns a pointer to its value, or the passed 'def' pointer if no such key can be found in dictionary. The returned character pointer points to data internal to the dictionary object, you should not try to free it or modify it. </p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">unsigned</span>    hash ;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">int</span>         i ;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    hash = <a class="code" href="dictionary_8c.html#a9ad99578040354d12ba4cc518c1c18d8">dictionary_hash</a>(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">for</span> (i=0 ; i&lt;d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> ; i++) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            continue ;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">/* Compare hash */</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">if</span> (hash==d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>[i]) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="comment">/* Compare string, to avoid hash collisions */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">if</span> (!strcmp(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>, d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i])) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="keywordflow">return</span> d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i] ;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> def ;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00100">dictionary_hash()</a>, <a class="el" href="#l00055">_dictionary_::hash</a>, <a class="el" href="#l00054">_dictionary_::key</a>, <a class="el" href="#l00028">key()</a>, <a class="el" href="#l00005">NULL</a>, <a class="el" href="#l00052">_dictionary_::size</a>, and <a class="el" href="#l00053">_dictionary_::val</a>.</p>

</div>
</div>
<a id="a9ad99578040354d12ba4cc518c1c18d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad99578040354d12ba4cc518c1c18d8">&#9670;&nbsp;</a></span>dictionary_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned dictionary_hash </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the hash key for a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Character string to use for key. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 unsigned int on at least 32 bits.</dd></dl>
<p>This hash function has been taken from an Article in Dr Dobbs Journal. This is normally a collision-free function, distributing keys evenly. The key is stored anyway in the struct so that collision can be avoided by comparing the key itself in last resort. </p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">int</span>         len ;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">unsigned</span>    hash ;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">int</span>         i ;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    len = strlen(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">for</span> (hash=0, i=0 ; i&lt;len ; i++) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        hash += (unsigned)<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>[i] ;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        hash += (hash&lt;&lt;10);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        hash ^= (hash&gt;&gt;6) ;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    hash += (hash &lt;&lt;3);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    hash ^= (hash &gt;&gt;11);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    hash += (hash &lt;&lt;15);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> hash ;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00028">key()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00187">dictionary_get()</a>, <a class="el" href="#l00233">dictionary_set()</a>, and <a class="el" href="#l00301">dictionary_unset()</a>.</p>

</div>
</div>
<a id="a9f584d70e3559fe6fe5f62a112bc7b17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f584d70e3559fe6fe5f62a112bc7b17">&#9670;&nbsp;</a></span>dictionary_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a>* dictionary_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new dictionary object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Optional initial size of the dictionary. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 newly allocated dictionary objet.</dd></dl>
<p>This function allocates a new dictionary object of given size and returns it. If you do not know in advance (roughly) the number of entries in the dictionary, give size=0. </p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="struct__dictionary__.html">dictionary</a>  *   d ;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">/* If no size was specified, allocate space for DICTMINSZ */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (size&lt;<a class="code" href="dictionary_8c.html#aaf4ab97b3163920286cb932a3faedf86">DICTMINSZ</a>) size=<a class="code" href="dictionary_8c.html#aaf4ab97b3163920286cb932a3faedf86">DICTMINSZ</a> ;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (!(d = (<a class="code" href="struct__dictionary__.html">dictionary</a> *)calloc(1, <span class="keyword">sizeof</span>(<a class="code" href="struct__dictionary__.html">dictionary</a>)))) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> = size ;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>  = (<span class="keywordtype">char</span> **)calloc(size, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>  = (<span class="keywordtype">char</span> **)calloc(size, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)calloc(size, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span>));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> d ;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00033">DICTMINSZ</a>, <a class="el" href="#l00055">_dictionary_::hash</a>, <a class="el" href="#l00054">_dictionary_::key</a>, <a class="el" href="#l00005">NULL</a>, <a class="el" href="#l00052">_dictionary_::size</a>, and <a class="el" href="#l00053">_dictionary_::val</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00529">iniparser_load()</a>.</p>

</div>
</div>
<a id="af4d7cdd694617bc1791b194b7ce37717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4d7cdd694617bc1791b194b7ce37717">&#9670;&nbsp;</a></span>dictionary_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dictionary_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a value in a dictionary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>dictionary object to modify. </td></tr>
    <tr><td class="paramname">key</td><td>Key to modify or add. </td></tr>
    <tr><td class="paramname">val</td><td>Value to add. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if Ok, anything else otherwise</dd></dl>
<p>If the given key is found in the dictionary, the associated value is replaced by the provided one. If the key cannot be found in the dictionary, it is added to it.</p>
<p>It is Ok to provide a NULL value for val, but NULL values for the dictionary or the key are considered as errors: the function will return immediately in such a case.</p>
<p>Notice that if you dictionary_set a variable to NULL, a call to dictionary_get will return a NULL value: the variable will be found, and its value (NULL) is returned. In other words, setting the variable content to NULL is equivalent to deleting the variable from the dictionary. It is not possible (in this implementation) to have a key in the dictionary without value.</p>
<p>This function returns non-zero in case of failure. </p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">int</span>         i ;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordtype">unsigned</span>    hash ;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (d==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> -1 ;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">/* Compute hash for this key */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    hash = <a class="code" href="dictionary_8c.html#a9ad99578040354d12ba4cc518c1c18d8">dictionary_hash</a>(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>) ;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">/* Find if value is already in dictionary */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#ac93e659a505b71aa87b8b558b55ee872">n</a>&gt;0) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">for</span> (i=0 ; i&lt;d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> ; i++) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                continue ;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span> (hash==d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>[i]) { <span class="comment">/* Same hash value */</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">if</span> (!strcmp(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>, d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i])) {   <span class="comment">/* Same key */</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    <span class="comment">/* Found a value: modify and return */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                    <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i]!=<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        free(d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i]);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i] = val ? xstrdup(val) : <a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    <span class="comment">/* Value has been modified: return */</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    <span class="keywordflow">return</span> 0 ;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">/* Add a new value */</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">/* See if dictionary needs to grow */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#ac93e659a505b71aa87b8b558b55ee872">n</a>==d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a>) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">/* Reached maximum size: reallocate dictionary */</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>  = (<span class="keywordtype">char</span> **)mem_double(d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>,  d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)) ;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>  = (<span class="keywordtype">char</span> **)mem_double(d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>,  d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)) ;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)mem_double(d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>, d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span>)) ;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">if</span> ((d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">/* Cannot grow dictionary */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">return</span> -1 ;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="comment">/* Double size */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> *= 2 ;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">/* Insert key in the first empty slot */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">for</span> (i=0 ; i&lt;d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> ; i++) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="comment">/* Add key here */</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            break ;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/* Copy key */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]  = xstrdup(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i]  = val ? xstrdup(val) : <a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>[i] = hash;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#ac93e659a505b71aa87b8b558b55ee872">n</a> ++ ;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> 0 ;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00100">dictionary_hash()</a>, <a class="el" href="#l00055">_dictionary_::hash</a>, <a class="el" href="#l00054">_dictionary_::key</a>, <a class="el" href="#l00028">key()</a>, <a class="el" href="#l00051">_dictionary_::n</a>, <a class="el" href="#l00005">NULL</a>, <a class="el" href="#l00052">_dictionary_::size</a>, and <a class="el" href="#l00053">_dictionary_::val</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00425">iniparser_set()</a>.</p>

</div>
</div>
<a id="a108b89bce8d154d4a9f489cbc89f8b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108b89bce8d154d4a9f489cbc89f8b9e">&#9670;&nbsp;</a></span>dictionary_unset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dictionary_unset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dictionary_8h.html#a38dc8ef0215587613fb96525478b0a85">dictionary</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a key in a dictionary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>dictionary object to modify. </td></tr>
    <tr><td class="paramname">key</td><td>Key to remove. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function deletes a key in a dictionary. Nothing is done if the key cannot be found. </p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">unsigned</span>    hash ;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordtype">int</span>         i ;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a> == <a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    hash = <a class="code" href="dictionary_8c.html#a9ad99578040354d12ba4cc518c1c18d8">dictionary_hash</a>(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">for</span> (i=0 ; i&lt;d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a> ; i++) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]==<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            continue ;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">/* Compare hash */</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> (hash==d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>[i]) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="comment">/* Compare string, to avoid hash collisions */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span> (!strcmp(<a class="code" href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a>, d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i])) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="comment">/* Found key */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                break ;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (i&gt;=d-&gt;<a class="code" href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">size</a>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="comment">/* Key not found */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        return ;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    free(d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i]);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">key</a>[i] = <a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i]!=<a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        free(d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i]);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        d-&gt;<a class="code" href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">val</a>[i] = <a class="code" href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">hash</a>[i] = 0 ;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    d-&gt;<a class="code" href="struct__dictionary__.html#ac93e659a505b71aa87b8b558b55ee872">n</a> -- ;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    return ;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00100">dictionary_hash()</a>, <a class="el" href="#l00055">_dictionary_::hash</a>, <a class="el" href="#l00054">_dictionary_::key</a>, <a class="el" href="#l00028">key()</a>, <a class="el" href="#l00051">_dictionary_::n</a>, <a class="el" href="#l00005">NULL</a>, <a class="el" href="#l00052">_dictionary_::size</a>, and <a class="el" href="#l00053">_dictionary_::val</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00440">iniparser_unset()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astruct__dictionary___html_a7a89c8fb24cb365745431d881f8f0afd"><div class="ttname"><a href="struct__dictionary__.html#a7a89c8fb24cb365745431d881f8f0afd">_dictionary_::val</a></div><div class="ttdeci">char ** val</div><div class="ttdef"><b>Definition:</b> dictionary.h:53</div></div>
<div class="ttc" id="aikeys_8cpp_html_ac842a4d466ab2cd3712ab2ea8a3541b8"><div class="ttname"><a href="ikeys_8cpp.html#ac842a4d466ab2cd3712ab2ea8a3541b8">key</a></div><div class="ttdeci">void key(SDL_Event *key)</div><div class="ttdef"><b>Definition:</b> ikeys.cpp:28</div></div>
<div class="ttc" id="astruct__dictionary___html_a017aee3083b2fc453bcf2d7b5b51af86"><div class="ttname"><a href="struct__dictionary__.html#a017aee3083b2fc453bcf2d7b5b51af86">_dictionary_::hash</a></div><div class="ttdeci">unsigned * hash</div><div class="ttdef"><b>Definition:</b> dictionary.h:55</div></div>
<div class="ttc" id="adictionary_8c_html_a9ad99578040354d12ba4cc518c1c18d8"><div class="ttname"><a href="dictionary_8c.html#a9ad99578040354d12ba4cc518c1c18d8">dictionary_hash</a></div><div class="ttdeci">unsigned dictionary_hash(char *key)</div><div class="ttdoc">Compute the hash key for a string.</div><div class="ttdef"><b>Definition:</b> dictionary.c:100</div></div>
<div class="ttc" id="axbuffer_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="xbuffer_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> xbuffer.h:5</div></div>
<div class="ttc" id="astruct__dictionary___html_ac93e659a505b71aa87b8b558b55ee872"><div class="ttname"><a href="struct__dictionary__.html#ac93e659a505b71aa87b8b558b55ee872">_dictionary_::n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> dictionary.h:51</div></div>
<div class="ttc" id="astruct__dictionary___html_a2d90a3894737abd3270d8b9aefaac5ef"><div class="ttname"><a href="struct__dictionary__.html#a2d90a3894737abd3270d8b9aefaac5ef">_dictionary_::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> dictionary.h:52</div></div>
<div class="ttc" id="adictionary_8c_html_aaf4ab97b3163920286cb932a3faedf86"><div class="ttname"><a href="dictionary_8c.html#aaf4ab97b3163920286cb932a3faedf86">DICTMINSZ</a></div><div class="ttdeci">#define DICTMINSZ</div><div class="ttdef"><b>Definition:</b> dictionary.c:33</div></div>
<div class="ttc" id="astruct__dictionary___html"><div class="ttname"><a href="struct__dictionary__.html">_dictionary_</a></div><div class="ttdoc">Dictionary object.</div><div class="ttdef"><b>Definition:</b> dictionary.h:50</div></div>
<div class="ttc" id="astruct__dictionary___html_a3c962bd7edff49be125396596d1bec75"><div class="ttname"><a href="struct__dictionary__.html#a3c962bd7edff49be125396596d1bec75">_dictionary_::key</a></div><div class="ttdeci">char ** key</div><div class="ttdef"><b>Definition:</b> dictionary.h:54</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_d1893322f72b5d5b5df7d8e0e3dcd263.html">xtool</a></li><li class="navelem"><a class="el" href="dir_860a7e21afd9589b388f0a10722ba943.html">iniparser</a></li><li class="navelem"><a class="el" href="dictionary_8c.html">dictionary.c</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
